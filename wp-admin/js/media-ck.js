var findPosts;(function(e){findPosts={open:function(t,n){var r=document.documentElement.scrollTop||e(document).scrollTop(),i=e(".ui-find-overlay");if(i.length==0){e("body").append('<div class="ui-find-overlay"></div>');findPosts.overlay()}i.show();t&&n&&e("#affected").attr("name",t).val(n);e("#find-posts").show().draggable({handle:"#find-posts-head"}).css({top:r+50+"px",left:"50%",marginLeft:"-328px"});e("#find-posts-input").focus().keyup(function(e){e.which==27&&findPosts.close()});findPosts.send();return!1},close:function(){e("#find-posts-response").html("");e("#find-posts").draggable("destroy").hide();e(".ui-find-overlay").hide()},overlay:function(){e(".ui-find-overlay").css({"z-index":"999",width:e(document).width()+"px",height:e(document).height()+"px"}).on("click",function(){findPosts.close()})},send:function(){var t={ps:e("#find-posts-input").val(),action:"find_posts",_ajax_nonce:e("#_ajax_nonce").val()},n=e(".find-box-search .spinner");n.show();e.ajax({type:"POST",url:ajaxurl,data:t,success:function(e){findPosts.show(e);n.hide()},error:function(e){findPosts.error(e);n.hide()}})},show:function(t){if(typeof t=="string"){this.error({responseText:t});return}var n=wpAjax.parseAjaxResponse(t);n.errors&&this.error({responseText:wpAjax.broken});n=n.responses[0];e("#find-posts-response").html(n.data);e(".found-posts td").on("click",function(){e(this).parent().find(".found-radio input").prop("checked",!0)})},error:function(t){var n=t.statusText;t.responseText&&(n=t.responseText.replace(/<.[^<>]*?>/g,""));n&&e("#find-posts-response").html(n)}};e(document).ready(function(){e("#find-posts-submit").click(function(t){""==e("#find-posts-response").html()&&t.preventDefault()});e("#find-posts .find-box-search :input").keypress(function(e){if(13==e.which){findPosts.send();return!1}});e("#find-posts-search").click(findPosts.send);e("#find-posts-close").click(findPosts.close);e("#doaction, #doaction2").click(function(t){e('select[name^="action"]').each(function(){if(e(this).val()=="attach"){t.preventDefault();findPosts.open()}})})});e(window).resize(function(){findPosts.overlay()})})(jQuery);