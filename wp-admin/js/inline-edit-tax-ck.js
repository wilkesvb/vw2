(function(e){inlineEditTax={init:function(){var t=this,n=e("#inline-edit");t.type=e("#the-list").attr("data-wp-lists").substr(5);t.what="#"+t.type+"-";e(".editinline").live("click",function(){inlineEditTax.edit(this);return!1});n.keyup(function(e){if(e.which==27)return inlineEditTax.revert()});e("a.cancel",n).click(function(){return inlineEditTax.revert()});e("a.save",n).click(function(){return inlineEditTax.save(this)});e("input, select",n).keydown(function(e){if(e.which==13)return inlineEditTax.save(this)});e('#posts-filter input[type="submit"]').mousedown(function(e){t.revert()})},toggle:function(t){var n=this;e(n.what+n.getId(t)).css("display")=="none"?n.revert():n.edit(t)},edit:function(t){var n=this,r;n.revert();typeof t=="object"&&(t=n.getId(t));r=e("#inline-edit").clone(!0),rowData=e("#inline_"+t);e("td",r).attr("colspan",e(".widefat:first thead th:visible").length);e(n.what+t).hasClass("alternate")&&e(r).addClass("alternate");e(n.what+t).hide().after(r);e(':input[name="name"]',r).val(e(".name",rowData).text());e(':input[name="slug"]',r).val(e(".slug",rowData).text());e(r).attr("id","edit-"+t).addClass("inline-editor").show();e(".ptitle",r).eq(0).focus();return!1},save:function(t){var n,r,i=e('input[name="taxonomy"]').val()||"";typeof t=="object"&&(t=this.getId(t));e("table.widefat .spinner").show();n={action:"inline-save-tax",tax_type:this.type,tax_ID:t,taxonomy:i};r=e("#edit-"+t+" :input").serialize();n=r+"&"+e.param(n);e.post(ajaxurl,n,function(n){var r,i;e("table.widefat .spinner").hide();if(n)if(-1!=n.indexOf("<tr")){e(inlineEditTax.what+t).remove();i=e(n).attr("id");e("#edit-"+t).before(n).remove();r=i?e("#"+i):e(inlineEditTax.what+t);r.hide().fadeIn()}else e("#edit-"+t+" .inline-edit-save .error").html(n).show();else e("#edit-"+t+" .inline-edit-save .error").html(inlineEditL10n.error).show()});return!1},revert:function(){var t=e("table.widefat tr.inline-editor").attr("id");if(t){e("table.widefat .spinner").hide();e("#"+t).remove();t=t.substr(t.lastIndexOf("-")+1);e(this.what+t).show()}return!1},getId:function(t){var n=t.tagName=="TR"?t.id:e(t).parents("tr").attr("id"),r=n.split("-");return r[r.length-1]}};e(document).ready(function(){inlineEditTax.init()})})(jQuery);